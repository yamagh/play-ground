# 2. 開発環境のセットアップ

このアプリケーションを開発する際は、バックエンドとフロントエンド、それぞれを担当する2つのプロセスを同時に実行する必要があります。

## 2つの主要プロセス

開発中は、ターミナル（コマンドプロンプト）を2つ開き、それぞれで以下のコマンドを実行します。

1.  **バックエンドサーバー (Play Framework)**
    ```bash
    sbt run
    ```
    このコマンドは、sbt（Scala Build Tool）を起動し、Play Frameworkアプリケーションをコンパイルして実行します。これにより、APIサーバーが起動し、`http://localhost:9000` でリクエストを受け付けるようになります。

2.  **フロントエンド開発サーバー (webpack)**
    ```bash
    npm run hmr
    ```
    このコマンドは、webpackの開発サーバーをHMR (Hot Module Replacement) モードで起動します。このサーバーは、`app/assets/svelte` などのフロントエンド関連のソースコードの変更を監視します。

## プロセスの役割分担

2つのプロセスは、以下のように明確に役割が分かれています。

- `sbt run`:
  - Java/Scalaのソースコードをコンパイルします。
  - Play FrameworkのWebサーバーを起動します。
  - APIエンドポイントの提供や、HTMLテンプレート (`.scala.html`) のレンダリングを担当します。

- `npm run hmr`:
  - Svelte/TypeScriptのソースコードを、ブラウザが実行可能なJavaScriptに変換（ビルド）します。
  - ソースコードが変更されると、**差分のみをビルドしてブラウザに送信**します。

## HMR (Hot Module Replacement) の利点

`npm run hmr` を使う最大の利点は、HMRの機能にあります。

通常の開発では、コードを修正するたびに手動でブラウザをリロードする必要があります。しかしHMRを使うと、Svelteコンポーネントなどを編集して保存するだけで、**ブラウザ全体をリロードすることなく、変更した部分だけが即座に画面に反映されます**。

例えば、フォームに入力途中のデータがあっても、その状態を維持したままUIの見た目を修正できます。これにより、開発サイクルが高速になり、非常に快適な開発体験が得られます。
