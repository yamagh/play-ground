# 1. アーキテクチャ概要

このリポジトリは、Play FrameworkとSvelteを組み合わせたWebアプリケーションです。ここでは、アプリケーションを構成する主要な技術と、その全体像を解説します。

## 技術スタック

このアプリケーションは、以下の主要な技術スタackで構築されています。

- **Play Framework**: バックエンドのフレームワークです。ScalaとJavaで書かれており、Webアプリケーションのサーバーサイドロジックを担当します。
- **Svelte**: フロントエンドのUIライブラリです。ユーザーインターフェースを構築するために使用されます。
- **Ebean**: JavaのORM (Object-Relational Mapping) ライブラリです。データベースとのやり取りを簡潔に記述するために使用します。
- **sbt (The Scala Build Tool)**: Scala/Javaプロジェクトのビルドツールです。依存関係の管理、コンパイル、サーバーの起動などを行います。
- **webpack**: フロントエンドのアセット（Svelte, TypeScript, CSSなど）を、ブラウザが解釈できる形式（JavaScript, CSS）に変換（ビルド）するためのツールです。

## 主要フォルダの役割

プロジェクトの主要なフォルダとその役割は以下の通りです。

- `app/controllers`: HTTPリクエストを受け取り、レスポンスを返すロジックを記述します。
  - `app/controllers/web`: 画面表示用のコントローラーを配置します。
  - `app/controllers/api`: JSONを返すAPI用のコントローラーを配置します。
- `app/models`: データベースのテーブル構造を定義するクラスを配置します。
- `app/repository`: データベースへのアクセス処理（クエリの発行など）を記述します。
- `app/assets/svelte`: SvelteコンポーネントやTypeScriptコードなど、フロントエンドのソースコードを配置します。
- `conf`: アプリケーションの設定ファイルを配置します。
  - `routes`: URLとControllerのアクションを紐付けるルーティング情報を記述します。
  - `application.conf`: データベース接続情報など、アプリケーションの全体的な設定を記述します。
- `public`: webpackによってビルドされた後のJavaScriptやCSSファイルが配置される場所です。Play Frameworkは、このディレクトリのファイルを静的アセットとしてブラウザに配信します。

## リクエストから画面表示までの流れ

ブラウザからリクエストが送られてから、Svelteで構築された画面が表示されるまでの一連の流れは以下のようになります。

1.  **ブラウザ**: ユーザーがURLにアクセスします。
2.  **`conf/routes`**: Play Frameworkは、リクエストされたURLに一致する定義を `routes` ファイルから探し、対応するControllerのアクションを特定します。
3.  **`app/controllers`**: 特定されたControllerのアクションが実行されます。このアクションは、多くの場合 `app/views/screen.scala.html` というテンプレートを呼び出します。
4.  **`app/views/screen.scala.html`**: これはSvelteコンポーネントをホストするためのHTMLテンプレートです。このテンプレートは、Svelteコンポーネントをマウント（描画）するための `div` 要素と、ビルドされたJavaScriptファイルを読み込むための `<script>` タグを含んでいます。
5.  **Svelteコンポーネントのマウント**: ブラウザがHTMLを受け取ると、`<script>` タグによってJavaScriptが実行されます。このJavaScriptが、指定されたSvelteコンポーネント（例: `tasks/Page.svelte`）を `div` 要素にマウントし、ユーザーインターフェースを画面に描画します。

このように、バックエンドのPlay FrameworkがHTMLの骨格を提供し、フロントエンドのSvelteがその中で動的にUIを構築するという役割分担になっています。
