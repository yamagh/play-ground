# 4-2. コラム: REST API設計の基本

前の章で `/api/tasks` というAPIを作成しました。このようなWeb APIを設計する際に、現在主流となっている考え方が「**REST (REpresentational State Transfer)**」です。RESTは、Webのアーキテクチャスタイル（設計思想）の一つであり、その原則に従って設計されたAPIを「RESTful API」と呼びます。

この章では、RESTの基本的な原則と、このプロジェクトでどのように適用されているかを見ていきましょう。

## RESTの原則

RESTにはいくつかの重要な原則がありますが、特にAPI設計において意識すべきは以下の3つです。

### 1. リソース中心のURI設計

RESTでは、APIで操作する対象（データや機能）をすべて「**リソース**」として捉えます。そして、各リソースを識別するためにURI（Uniform Resource Identifier）を使用します。

URIを設計する際は、**動詞ではなく名詞（リソース名）を使う**のが基本です。

- **良い例**:
  - `/tasks` （すべてのタスクのリスト）
  - `/tasks/123` （IDが123の特定のタスク）
  - `/users/456/tasks` （IDが456のユーザーが持つタスクのリスト）

- **悪い例**:
  - `/getAllTasks`
  - `/getTaskById?id=123`
  - `/createTask`

リソースをURIで表現することで、APIの構造が直感的で分かりやすくなります。

### 2. HTTPメソッドの適切な利用

リソースに対してどのような操作を行いたいかは、URIではなく**HTTPメソッド**（GET, POST, PUT, DELETEなど）で表現します。

- **GET**: リソースの**取得**
  - `GET /tasks`: すべてのタスクを取得する。
  - `GET /tasks/123`: IDが123のタスクを取得する。

- **POST**: リソースの**新規作成**
  - `POST /tasks`: 新しいタスクを作成する。（作成するデータはリクエストボディに含める）

- **PUT**: リソースの**更新**（全体を置き換える）
  - `PUT /tasks/123`: IDが123のタスクを更新する。（更新後のデータはリクエストボディに含める）

- **DELETE**: リソースの**削除**
  - `DELETE /tasks/123`: IDが123のタスクを削除する。

このように、URI（名詞）とHTTPメソッド（動詞）を組み合わせることで、「どのリソース」に「何をする」かが明確に表現されます。

### 3. ステートレス性

RESTful APIは**ステートレス**であるべき、とされています。これは、サーバーがクライアントの状態（例えば、前のリクエストで何をしたか、ログインしているかなど）をセッション情報として保持しない、という意味です。

各リクエストは、それ自体で完結するために必要な情報をすべて含んでいる必要があります（認証情報など）。
ステートレスにすることで、サーバー側の実装がシンプルになり、負荷分散装置を使ってサーバーの台数を増やすといったスケーリングが容易になるというメリットがあります。

## このプロジェクトにおけるAPI設計

このチュートリアルで作成するAPIも、これらのRESTの原則に沿って設計されています。

- **URI**:
  - `/api/tasks` や `/api/tasks/:id` のように、リソース（task）を中心としたURIになっています。
  - `/api` というプレフィックス（接頭辞）を付けることで、画面表示用のURL（例: `/tasks`）とAPI用のURL（例: `/api/tasks`）を明確に区別しています。

- **データ交換フォーマット**:
  - クライアント（Svelte）とサーバー（Play Framework）の間でやり取りするデータの形式には、JSON (JavaScript Object Notation) を利用します。JSONは軽量で人間にも読みやすく、JavaScriptとの親和性が高いため、現代のWeb APIで最も広く使われています。

---

RESTの原則を理解し、それに従ってAPIを設計することで、他の開発者にとっても理解しやすく、再利用性の高いAPIを構築することができます。
