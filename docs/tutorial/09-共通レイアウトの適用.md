# 2-4. 共通レイアウトの適用

現在のタスク一覧画面は単体で表示されていますが、実際のアプリケーションでは、ヘッダー、フッター、サイドメニューといった共通のレイアウト要素が必要です。

このプロジェクトでは、`app/assets/svelte/layouts` ディレクトリに、アプリケーション全体で共通のレイアウトを提供するSvelteコンポーネントがあらかじめ用意されています。これらを活用して、タスク一覧画面に共通レイアウトを適用してみましょう。

## レイアウトコンポーネントの役割

主に2つのコンポーネントを使用します。

- **`LayoutSideMenu.svelte`**:
  画面の最も外側の枠組みを定義します。アプリケーションのロゴが入ったヘッダーと、左側のサイドメニューを提供します。

- **`PageContainer.svelte`**:
  各画面のメインコンテンツ部分のヘッダー（ページタイトルやパンくずリストなど）を提供します。

これらのコンポーネントを組み合わせることで、各画面はメインコンテンツの中身だけを記述すればよくなり、コードの重複を減らし、アプリケーション全体のデザインに一貫性を持たせることができます。

## レイアウトの適用

`app/assets/svelte/screens/tasks/Page.svelte` を開き、以下のように編集してください。

**`app/assets/svelte/screens/tasks/Page.svelte`**
```svelte
<script lang="ts">
  import LayoutSideMenu from '~/layouts/LayoutSideMenu.svelte';
  import PageContainer from '~/layouts/PageContainer.svelte';
  import { Button, Card, CardBody, CardHeader, Col, Row } from 'sveltestrap';

  const breadcrumbs = [{ name: 'Tasks' }];
</script>

<LayoutSideMenu>
  <PageContainer title="Tasks" breadcrumbs={breadcrumbs}>
    {#snippet body()}
      <Row>
        <Col>
          <Card>
            <CardHeader class="d-flex justify-content-between align-items-center">
              <h5 class="mb-0">タスク一覧</h5>
              <Button color="primary">
                <i class="bi-plus-lg" />
                新規登録
              </Button>
            </CardHeader>
            <CardBody>
              <p>ここにタスクの一覧が表示されます。</p>
            </CardBody>
          </Card>
        </Col>
      </Row>
    {/snippet}
  </PageContainer>
</LayoutSideMenu>

<style>
  /* スタイルは変更なし */
</style>
```

ブラウザで [http://localhost:9000/tasks](http://localhost:9000/tasks) を確認してみてください。画面の左側にサイドメニュー、上部にヘッダーが表示され、その中にタスク一覧のカードが配置されているはずです。

### 変更点の解説

- **`import ... from '~/layouts/...'`**:
  レイアウトコンポーネントをインポートしています。`~/` は `app/assets/svelte` ディレクトリへのエイリアス（別名）で、`tsconfig.json` で設定されています。これにより、深い階層からでも簡単に見つけたいファイルをインポートできます。

- **`<LayoutSideMenu>` と `<PageContainer>` で囲む**:
  これまで作成したコンテンツ全体を、`<LayoutSideMenu>` と `<PageContainer>` で囲んでいます。これにより、共通レイアウトが適用されます。

- **`props`によるデータ受け渡し**:
  `<PageContainer>` コンポーネントに `title="Tasks"` や `breadcrumbs={breadcrumbs}` といった属性を渡しています。これは「**props**」と呼ばれ、親コンポーネントから子コンポーネントへデータを渡すための仕組みです。
  - `title`: ページコンテナのヘッダーに表示されるタイトルを設定します。
  - `breadcrumbs`: パンくずリストのデータを配列で渡しています。

- **`{#snippet body()}` を使ったコンテンツの埋め込み**:
  Svelte 5で導入された「**snippet**」という機能を使っています。これは、コンポーネントの一部を切り取って、別のコンポーネントに「スロット」のように埋め込むための仕組みです。
  
  `PageContainer` コンポーネントの内部には、`{@render body()}` という記述があり、`{#snippet body()}` で囲まれた部分がその場所に埋め込まれるようになっています。
  
  これにより、`PageContainer` は「ページの骨格」だけを提供し、その中に表示する具体的な内容は呼び出し側（`tasks/Page.svelte`）が自由に定義できる、という柔軟な構造が実現できています。

---

これで、タスク一覧画面がアプリケーションの一画面として適切な見た目になりました。次の章では、UIを部品化していく「コンポーネント」という考え方について、もう少し詳しく学びます。
