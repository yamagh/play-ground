# 1-2. 開発環境のセットアップ

このプロジェクトをローカル環境で動かすためには、バックエンドとフロントエンド、それぞれを担当する2つのプロセスを起動する必要があります。

## 2つの主要プロセス

開発を開始するには、ターミナル（コマンドプロンプト）を2つ開き、それぞれで以下のコマンドを実行します。

1.  **バックエンドサーバーの起動**
    ```bash
    sbt run
    ```
    このコマンドは、Play Frameworkアプリケーションを起動します。初回起動時は依存ライブラリのダウンロードなどで時間がかかることがあります。

2.  **フロントエンド開発サーバーの起動**
    ```bash
    npm run hmr
    ```
    このコマンドは、Svelte/TypeScriptのソースコードを監視し、変更があるたびに自動でビルドを行う開発サーバーを起動します。`hmr` は "Hot Module Replacement" の略です。

## プロセスの役割分担

なぜ2つのプロセスが必要なのでしょうか？それは、バックエンドとフロントエンドで異なる技術スタックとビルドの仕組みを利用しているためです。

- **`sbt run` の役割**:
  - JavaとScalaで書かれたバックエンドのソースコードをコンパイルします。
  - Play Frameworkを起動し、HTTPリクエストを受け付けられる状態にします。
  - `http://localhost:9000` でアプリケーションがアクセス可能になります。

- **`npm run hmr` の役割**:
  - `app/assets/svelte` ディレクトリ内のSvelteコンポーネントやTypeScriptファイルを監視します。
  - ファイルが変更されると、webpackが差分だけを高速にビルドします。
  - ビルドされた成果物（JavaScriptファイル）を、バックエンドサーバーが配信できる `target` ディレクトリに配置します。
  - HMR（Hot Module Replacement）サーバーを起動し、ブラウザと通信して変更された部分だけを差し替えます。

## HMR (Hot Module Replacement) の利点

`npm run hmr` を使う最大のメリットは、**HMR (Hot Module Replacement)** にあります。

通常、フロントエンドのコード（例えばSvelteコンポーネントの見た目やロジック）を変更した場合、その変更を画面で確認するには手動でブラウザをリロードする必要があります。

しかし、HMRが有効な開発環境では、コードを保存した瞬間に変更が即座にブラウザに反映されます。ページ全体をリロードするのではなく、変更されたコンポーネントだけが差し替えられるため、非常に高速です。これにより、フォームに入力していた内容などの状態を維持したままUIの調整ができ、開発サイクルを大幅にスピードアップさせることができます。

---

これで開発環境の準備が整いました。次の章からは、Play FrameworkとSvelteそれぞれの特徴について、もう少し詳しく見ていきましょう。
